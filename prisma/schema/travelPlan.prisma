model TravelPlan {
  id          String     @id @default(uuid())
  creatorId   String
  title       String
  description String     @db.Text
  destination String
  startDate   DateTime
  endDate     DateTime
  budget      Float?
  travelType  TravelType
  maxMembers  Int        @default(5)
  activities  String[] // e.g., hiking, sightseeing, food tours
  images      String[] // URLs of uploaded images

  // Status
  status    TravelPlanStatus @default(OPEN)
  isDeleted Boolean          @default(false)

  // Timestamps
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // Relations
  creator        User            @relation("CreatedTravelPlans", fields: [creatorId], references: [id])
  travelRequests TravelRequest[]
  reviews        Review[]

  @@map("travel_plans")
}

model TravelRequest {
  id           String              @id @default(uuid())
  travelPlanId String
  userId       String
  message      String?             @db.Text
  status       TravelRequestStatus @default(PENDING)

  // Timestamps
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // Relations
  travelPlan TravelPlan @relation(fields: [travelPlanId], references: [id], onDelete: Cascade)
  user       User       @relation("TravelRequests", fields: [userId], references: [id])

  @@unique([travelPlanId, userId]) // One request per user per plan
  @@map("travel_requests")
}

model Review {
  id           String @id @default(uuid())
  travelPlanId String
  reviewerId   String
  revieweeId   String
  rating       Int // 1-5
  comment      String @db.Text

  // Timestamps
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // Relations
  travelPlan TravelPlan @relation(fields: [travelPlanId], references: [id], onDelete: Cascade)
  reviewer   User       @relation("ReviewsGiven", fields: [reviewerId], references: [id])
  reviewee   User       @relation("ReviewsReceived", fields: [revieweeId], references: [id])

  @@unique([travelPlanId, reviewerId, revieweeId]) // One review per pair per trip
  @@map("reviews")
}
